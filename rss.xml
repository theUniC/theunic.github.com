<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
  <channel>
    <atom:link rel="hub" href="http://pubsubhubbub.appspot.com" xmlns:atom="http://www.w3.org/2005/Atom"/>
    <title>Christian Soronellas</title>
    <generator>Octopress</generator>
    <link>http://theunic.github.io</link>
 
    
    <item>
      <title>Why you shoud not be using annotations</title>
      <description><p>In fact. <strong>Annotations</strong> are evil. If you&rsquo;re using it, you&rsquo;re doing it wrong. But why? Why are they so evil? Next, I&rsquo;m going to present a real-world use-case in which the use of annotations
lead to a serious coupling situation.</p>

<h2>The use-case</h2>

<p>Supose you have an application in which you want to integarate an ORM with annotated support to define your domain objects, in order to keep under control the growing complex business logic. You
look at the resulting code, and &hellip; Wow! Have you ever seen such a clean code?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="k">namespace</span> <span class="nx">Acme\Shop\Entity</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">use</span> <span class="nx">Doctrine\ORM\Mapping</span> <span class="k">as</span> <span class="nx">ORM</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd"> * @ORM\Entity</span>
</span><span class='line'><span class="sd"> */</span>
</span><span class='line'><span class="k">class</span> <span class="nc">Product</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="sd">/**</span>
</span><span class='line'><span class="sd">   * @ORM\Id</span>
</span><span class='line'><span class="sd">   */</span>
</span><span class='line'>  <span class="k">private</span> <span class="nv">$id</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="sd">/**</span>
</span><span class='line'><span class="sd">   * @ORM\Column(type=&quot;string&quot;)</span>
</span><span class='line'><span class="sd">   */</span>
</span><span class='line'>  <span class="k">private</span> <span class="nv">$title</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="sd">/**</span>
</span><span class='line'><span class="sd">   * @ORM\Column(type=&quot;decimal&quot;)</span>
</span><span class='line'><span class="sd">   */</span>
</span><span class='line'>  <span class="k">private</span> <span class="nv">$price</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Coupling, coupling and more coupling</h2>

<p>This piece of code flaws of a serious coupling problem. <strong>YOU ARE ACTUALLY COUPLING YOUR DOMAIN OBJECT TO ITS OWN CONFIGURATION</strong>. A statement of <strong>domain-driven design</strong> that I
really like is that &ldquo;<em>Separating the domain layer from the infrastructure and user interface layers allows much cleaner design of each layer. Isolated layers are much less expensive
to mantain, because they tend to evolve at different rates and respond to different needs.</em>&rdquo;</p>

<p>But, how could it be? It&rsquo;s only a plain PHP class with no defined behaviour and a few comments, it can be changed whenever it&rsquo;s needed.</p>

<p>OK! Supose that there&rsquo;s a need to reuse this entity in another persistence engine. How could it be done with annotations? It cannot be done, because I cannot define the same annotation
twice without overriding the previous one!</p>

<p>The simplest example could be different table names between engines that share common entities. How could it be mapped without breaking each other? Or the use of sequences in Oracle/Postgres
&hellip; So, indeed, this entity is coupled with the persistence engine.</p>

<p>The solution would be to move all the persistence mapping (aka entity metadata) to another format like YAML, XML or PHP (no annotated code). Doing it this way several mapping formats
could be used and share common entities between each of them.</p>

<h2>And with couping comes the rest &hellip;</h2>

<p>In case we need to perform unit testing or to do some kind of runtime substitution, the entity is absolutely contextualized and the dependencies cannot be changed at runtime. It&rsquo;s actually
tied to an implementation. So there is no chance to substitute any of the dependencies.</p>

<h2>Conclusion</h2>

<p>At a first glance annotations could seem a big chance to keep your code simple and clean. But It actually leads to a coupling problem and serious design flaws. If you don&rsquo;t mind about that
coupling level, then probably annotations are for you.</p>
</description>
      <link>http://theunic.github.io/2013/07/25/why-you-should-not-be-using-annotations.html</link>
      <pubDate>2013-07-25T21:03:00+02:00</pubDate>
      <guid>http://theunic.github.io/2013/07/25/why-you-should-not-be-using-annotations</guid>
    </item>
    
    <item>
      <title>My new and shiny personal blog!</title>
      <description><h2>Introducing Octopress</h2>

<p>Today I&rsquo;m reopening my personal blog. And it comes with a big change. I&rsquo;ve migrated from Wordpress to Octopress. Mainly for the content-orientation aspect of Octopress.
I&rsquo;m very tired to fight against the so cool web interface of Wordpress for managing posts and all the stuff. I think Wordpress it&rsquo;s a great product besides the internal
crappy code, but I like the simplicity of Octopress &amp; Jekyll.</p>

<h2>The pros</h2>

<p>Mainly the reasons for the change have been</p>

<ol>
<li>Octopress is dead simple. You don&rsquo;t need complicated and bloated web interfaces. Instead is a matter of write content. As simple as that.</li>
<li>It&rsquo;s fast than Wordpress. Remember Octopress is based on <a href="http://jekyllrb.com">Jekyll</a>, a static blog-aware web site generator, that dumps all your posts to plain HTML.</li>
<li>Levarages git. Git is used to keep track of all the changes in your content :)</li>
<li>Plays nice with Github. Jekyll is intended to be deployed to github pages, so to publish the blog had been matter of minutes.</li>
</ol>


<h2>The cons</h2>

<p>Must admit. Octopress / Jekyll isn&rsquo;t the silver bullet.</p>

<ol>
<li>It&rsquo;s hard to get started. I&rsquo;m a ruby newby! :(</li>
<li>Don&rsquo;t use Octopress if your main concern it&rsquo;s not only to write content.</li>
</ol>

</description>
      <link>http://theunic.github.io/2013/07/23/my-new-and-shiny-personal-blog.html</link>
      <pubDate>2013-07-23T20:55:00+02:00</pubDate>
      <guid>http://theunic.github.io/2013/07/23/my-new-and-shiny-personal-blog</guid>
    </item>
    
  </channel>
</rss>